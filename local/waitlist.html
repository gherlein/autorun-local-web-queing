<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>BrightSign User Variables</title>
<LINK href="local.css" rel="stylesheet" type="text/css">
<script src="jquery-1.9.1.min.js"></script>
<script src="local.js"></script>
<script>

var localPlayerIP="http://192.168.70.100:8080";

window.onload = function() {

  var isBSP=isBrightSign();

  if(isBSP) {
    bsp=bsputils_init(isBSP,true);
  } else {
    bsp=bsputils_init(isBSP,true,localPlayerIP);
  }
  getWaitListVars(doVars);  
  setInterval(function(){getWaitListVars(doVars)},5000);


};


function rowClicked(x)
{
  var name = x.cells[0].innerText || x.cells[0].textContent;
  delWaitListVar(name);
}


function doVars(us)
{
  console.log("doVars");
  if(typeof us === 'undefined')
  {
    console.log("waitListVars not defined");
    return;
  }

  var s="";
  s += '<table id="waitlist-table" cellspacing=0 cellpadding=2 border=1>';
  s += "<tr><th>Name</th><th>Number</th></tr>";
  for(var x=0;x<us.length;x++)
  {
    var o=us[x];
    printObj(o);
    s+='<tr onclick="rowClicked(this)"">';
    s+="<td><center>"+o.name+"</center></td>";
    s+="<td><center>"+o.number+"</center></td>";
    s+='<td><button class="delbtn">delete</button></td>';
    s+="</tr>";
  } 
  s+="</table>"
  console.log(s);
  $('div.waitlist').html(s);
};


</script>

</head>
<body>
<div id="header">
<img src="logo.png" alt="LOGO">
</div>
<center>
<h1>WaitList Page</h1>
<div class="waitlist"></div>

<div id="form">
<form action="/AddWaitListEntry" method="post">
<div class="form-data"></div>
<input class="button" type="submit" value="Set Values" /><br />

</form>

</div>
</center>
<div>
<br>
</div>
<div id="footer">
	<center>(c) 2013 Brightsign LLC</center>
</div>
</body>
</html>
